{% extends "base.html" %}
{% block title %}Perfil{% endblock %}

{% block content %}
<div class="container justify-content-center mt-5">
  <div class="card border-3 rounded p-4 shadow-lg" style="border: 3px solid #03045e; max-width: 600px; margin: auto;">

    <div class="text-center">
      <i class="bi bi-person-circle" style="font-size: 6rem; color:#0077b6;"></i>
      <h3 class="mt-3">Perfil del usuario</h3>
      <p class="text-muted">{{ usuario }}</p>
    </div>

    <form method="POST">

      <div class="mb-3">
        <label class="form-label fw-bold">Nombre:</label>
        <input type="text" class="form-control" name="nombre" placeholder="Tu nombre" value="{{ nombre }}">
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Edad:</label>
        <input type="number" class="form-control" name="edad" placeholder="Tu edad" value="{{ edad }}">
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Estatura (cm):</label>
        <input type="number" class="form-control" name="estatura" placeholder="Ej. 170" value="{{ estatura }}">
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Peso (kg):</label>
        <input type="number" class="form-control" name="peso" placeholder="Ej. 65" value="{{ peso }}">
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Nivel de entrenamiento:</label>
        <select class="form-select" name="nivel_entrenamiento">
            <option value="" disabled {% if not nivel_entrenamiento %}selected{% endif %}>Elegir nivel</option>
            <option value="ligero" {% if nivel_entrenamiento == 'ligero' %}selected{% endif %}>Ligero</option>
            <option value="moderado" {% if nivel_entrenamiento == 'moderado' %}selected{% endif %}>Moderado</option>
            <option value="fuerte" {% if nivel_entrenamiento == 'fuerte' %}selected{% endif %}>Fuerte</option>
        </select>
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">Objetivo:</label>
        <textarea class="form-control" name="objetivo" rows="3" placeholder="¿Qué deseas lograr?">{{ objetivo }}</textarea>
      </div>

      <button type="submit" class="btn w-100" style="background-color:#0077b6; color:white;">
        Guardar cambios
      </button>

    </form>

    {% if peso and estatura %}
    <div class="alert alert-info text-center mt-4">
        <strong>IMC:</strong>
        {{ ( peso|float / ((estatura|float / 100)**2 ) ) | round(2) }}
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}